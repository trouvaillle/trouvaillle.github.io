---
title: Saju
layout: none
permalink: /app/saju
date: 2025-07-01 19:49:00 +0900
---
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ì£¼ ì •ë³´ ì¡°íšŒ - ì›¹ ë²„ì „</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #524c46;
            --secondary-color: #fcfbf9;
            --accent-color: #e57576;
            --border-color: #b8b2ac;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --error-color: #f44336;
            
            /* ì˜¤í–‰ ìƒ‰ìƒ */
            --wood-color: #4c8093;
            --fire-color: #e57576;
            --earth-color: #cfa05a;
            --metal-color: #968f88;
            --water-color: #4a4955;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--secondary-color);
            color: var(--primary-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
        .input-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.4em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: var(--primary-color);
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .inline-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .radio-group {
            display: flex;
            gap: 15px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #d65a5b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(229, 117, 118, 0.3);
        }

        .btn-secondary {
            background-color: var(--border-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: #a5a09a;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* ë„ì‹œ ê²€ìƒ‰ */
        .city-search {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .city-search input {
            flex: 1;
        }

        .city-list {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
            display: none;
        }

        .city-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        .city-item:hover {
            background-color: var(--secondary-color);
        }

        .city-item:last-child {
            border-bottom: none;
        }

        /* ì§„í–‰ë¥  í‘œì‹œ */
        .progress-container {
            margin: 20px 0;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: var(--primary-color);
            font-weight: 600;
        }

        /* íƒ­ ì‹œìŠ¤í…œ */
        .results-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: none;
        }

        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab-btn {
            padding: 12px 20px;
            border: none;
            background: none;
            color: var(--primary-color);
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background-color: var(--accent-color);
            color: white;
        }

        .tab-btn:hover:not(.active) {
            background-color: var(--secondary-color);
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        .result-text {
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .tab-nav {
                flex-direction: column;
            }
            
            .city-search {
                flex-direction: column;
            }
            
            .inline-group {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
        .toast-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--success-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        .toast-notification.show {
            opacity: 1;
        }

        /* í† ìŠ¤íŠ¸ íƒ€ì…ë³„ ìŠ¤íƒ€ì¼ */
        .toast-notification.success {
            background-color: var(--success-color);
        }

        .toast-notification.error {
            background-color: var(--error-color);
        }

        .toast-notification.warning {
            background-color: var(--warning-color);
        }

        .toast-notification.info {
            background-color: var(--primary-color);
        }

        /* í† ìŠ¤íŠ¸ ì•„ì´ì½˜ */
        .toast-notification.success::before {
            content: 'âœ“';
            margin-right: 8px;
            font-size: 18px;
        }

        .toast-notification.error::before {
            content: 'âœ•';
            margin-right: 8px;
            font-size: 18px;
        }

        .toast-notification.warning::before {
            content: 'âš ';
            margin-right: 8px;
            font-size: 18px;
        }

        .toast-notification.info::before {
            content: 'â„¹';
            margin-right: 8px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ”® ì‚¬ì£¼ ì •ë³´ ì¡°íšŒ</h1>
        </div>

        <!-- ì…ë ¥ ì„¹ì…˜ -->
        <div class="input-section">
            <h2 class="section-title">ğŸ“ ê°œì¸ ì •ë³´ ì…ë ¥</h2>
            
            <div class="form-grid">
                <!-- ì´ë¦„ ì…ë ¥ -->
                <div class="form-group">
                    <label for="name">ì´ë¦„</label>
                    <div class="inline-group">
                        <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                        <button type="button" class="btn btn-secondary" onclick="generateRandomName()">ëœë¤ ì´ë¦„</button>
                    </div>
                </div>

                <!-- ì„±ë³„ ì„ íƒ -->
                <div class="form-group">
                    <label>ì„±ë³„</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="male" name="gender" value="M" checked>
                            <label for="male">ë‚¨ì„±</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="female" name="gender" value="F">
                            <label for="female">ì—¬ì„±</label>
                        </div>
                    </div>
                </div>

                <!-- ë‹¬ë ¥ ì¢…ë¥˜ -->
                <div class="form-group">
                    <label for="calendar">ë‹¬ë ¥</label>
                    <select id="calendar">
                        <option value="S">ì–‘ë ¥ (Solar)</option>
                        <option value="L">ìŒë ¥ (Lunar)</option>
                    </select>
                </div>

                <!-- ìƒë…„ì›”ì¼ -->
                <div class="form-group">
                    <label for="birthDate">ìƒë…„ì›”ì¼</label>
                    <input type="date" id="birthDate" value="1992-06-27">
                </div>

                <!-- ì¶œìƒ ì‹œê°„ -->
                <div class="form-group">
                    <label for="birthTime">ì¶œìƒ ì‹œê°„</label>
                    <input type="time" id="birthTime" value="09:15">
                </div>

                <!-- ì˜µì…˜ ì²´í¬ë°•ìŠ¤ -->
                <div class="form-group">
                    <label>ì˜µì…˜</label>
                    <div>
                        <div class="radio-item mb-10">
                            <input type="checkbox" id="hmUnsure">
                            <label for="hmUnsure">ì‹œê°„ì´ ë¶ˆí™•ì‹¤í•¨</label>
                        </div>
                        <div class="radio-item">
                            <input type="checkbox" id="midnightAdjust">
                            <label for="midnightAdjust">ìì • ì¡°ì •</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¶œìƒì§€ ì •ë³´ -->
            <div class="form-group mt-20">
                <h3 class="section-title">ğŸŒ ì¶œìƒì§€ ì •ë³´</h3>
                
                <!-- ë„ì‹œ ê²€ìƒ‰ -->
                <div class="form-group">
                    <label for="citySearch">ë„ì‹œ ê²€ìƒ‰</label>
                    <div class="city-search">
                        <input type="text" id="citySearch" placeholder="ë„ì‹œëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸, ë¶€ì‚°, ëŒ€êµ¬)">
                        <button type="button" class="btn btn-secondary" onclick="searchCities()">ê²€ìƒ‰</button>
                    </div>
                    <div id="cityList" class="city-list"></div>
                </div>

                <!-- ì„ íƒëœ ì§€ì—­ ì •ë³´ -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="location">ì„ íƒëœ ì§€ì—­</label>
                        <input type="text" id="location" value="ì„œìš¸íŠ¹ë³„ì‹œ, ëŒ€í•œë¯¼êµ­" readonly>
                    </div>
                    <div class="form-group">
                        <label for="locationId">ì§€ì—­ ID</label>
                        <input type="text" id="locationId" value="1835847" readonly>
                    </div>
                </div>
            </div>

            <!-- ì¡°íšŒ ë²„íŠ¼ -->
            <div class="text-center mt-20">
                <button type="button" class="btn btn-primary" onclick="requestSajuInfo()" id="requestBtn">
                    ğŸ” ì‚¬ì£¼ ì •ë³´ ì¡°íšŒ
                </button>
            </div>

            <!-- ì§„í–‰ë¥  í‘œì‹œ -->
            <div id="progressContainer" class="progress-container">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div id="progressText" class="progress-text">API í˜¸ì¶œ ì¤‘...</div>
            </div>
        </div>

        <!-- ê²°ê³¼ ì„¹ì…˜ -->
        <div id="resultsSection" class="results-section">
            <h2 class="section-title">ğŸ“Š ë¶„ì„ ê²°ê³¼</h2>
            
            <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="tab-nav">
                <button class="tab-btn active" onclick="switchTab(0)">ì‚¬ì£¼ ì°¨íŠ¸</button>
                <button class="tab-btn" onclick="switchTab(1)">í•©/ì¶© ì •ë³´</button>
                <button class="tab-btn" onclick="switchTab(2)">ê¸¸í‰ ì •ë³´</button>
                <button class="tab-btn" onclick="switchTab(3)">ìš©ì‹  ì •ë³´</button>
                <button class="tab-btn" onclick="switchTab(4)">í¬ì¸íŠ¸ ì •ë³´</button>
                <button class="tab-btn" onclick="switchTab(5)">íŒŒì›Œ/ë“ë ¹ ì •ë³´</button>
                <button class="tab-btn" onclick="switchTab(6)">ìµœì¢… í”„ë¡¬í”„íŠ¸</button>
            </div>

            <!-- íƒ­ ì»¨í…ì¸  -->
            <div id="tab0" class="tab-content active">
                <div id="chartResult" class="result-text">ì‚¬ì£¼ ì°¨íŠ¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab1" class="tab-content">
                <div id="details1Result" class="result-text">í•©/ì¶© ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab2" class="tab-content">
                <div id="details2Result" class="result-text">ê¸¸í‰ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab3" class="tab-content">
                <div id="usefulResult" class="result-text">ìš©ì‹  ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab4" class="tab-content">
                <div id="pointsResult" class="result-text">í¬ì¸íŠ¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab5" class="tab-content">
                <div id="powerResult" class="result-text">íŒŒì›Œ/ë“ë ¹ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
            <div id="tab6" class="tab-content">
                <div class="text-center mb-10">
                    <button type="button" class="btn btn-secondary" onclick="copyPromptToClipboard()" id="copyBtn" disabled>
                        ğŸ“‹ í”„ë¡¬í”„íŠ¸ ë³µì‚¬
                    </button>
                </div>
                <div id="promptResult" class="result-text">ìµœì¢… í”„ë¡¬í”„íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div id="toastNotification" class="toast-notification">
        í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>

    <script>
        // ì´ë¦„ ë°ì´í„°
        const namesData = {
            male_names: [
                "ê¹€ë¯¼ìˆ˜", "ì´ì¤€í˜¸", "ë°•ì§€í›ˆ", "ìµœìˆ˜ì§„", "ì •ë¯¼ìš°",
                "ê°•ë™í˜„", "ìœ¤ì‹œìš°", "ì„ì¬í˜„", "ì˜¤ìŠ¹í˜„", "ë°°ì„±ë¯¼",
                "ë¥˜ì¤€ì„", "í•œë„ìœ¤", "ì„œë¯¼í˜", "ë‚¨ì£¼ì›", "ì¡°í˜„ìš°",
                "ì†¡íƒœìœ¤", "êµ¬ë¯¼ì¬", "ì‹ ì¤€ì˜", "í™ì§€ì•ˆ", "ì „ìš°ì§„",
                "í™©ì‹œì›", "ë¬¸ì¤€ì„œ", "ë…¸ê±´ìš°", "ì•ˆì§€í˜¸", "ì¥ë¯¼ê¸°",
                "ë§ˆì‹œí›„", "ê³½ë„í˜„", "ì°¨ì¤€í¬", "ìœ ê±´í¬", "ë³€ì¤€í˜"
            ],
            female_names: [
                "ê¹€ì§€ì—°", "ì´ì„œì—°", "ë°•ìˆ˜ë¹ˆ", "ìµœì˜ˆë¦°", "ì •í•˜ì€",
                "ê°•ì„œìœ¤", "ìœ¤ì±„ì›", "ì„ì§€ìš°", "ì˜¤ë¯¼ì„œ", "ë°°ìœ ë‚˜",
                "ë¥˜ì‹œì€", "í•œì˜ˆì›", "ì„œì§€ë¯¼", "ë‚¨ìˆ˜ì•„", "ì¡°ì•„ë¦°",
                "ì†¡ë‹¤ì€", "êµ¬í•˜ë¦°", "ì‹ ì˜ˆì§„", "í™ì„œí˜„", "ì „ì€ì„œ",
                "í™©ì„œì˜", "ë¬¸ì§€ì•ˆ", "ë…¸ì±„ì€", "ì•ˆìˆ˜ì—°", "ì¥ì˜ˆì€",
                "ë§ˆì„œì§„", "ê³½ì±„ìœ¤", "ì°¨í•˜ëŠ˜", "ìœ ì„œì •", "ë³€ì˜ˆì„œ"
            ]
        };

        // ê¸€ë¡œë²Œ ë³€ìˆ˜
        let currentResults = {};

        // URL ë‚œë…í™” ì‹œìŠ¤í…œ (GitHub ê²€ìƒ‰ ë°©ì§€)
        const urlDecryptionKey = 0x5A;  // XOR í‚¤
        
        // ì•”í˜¸í™”ëœ URL í…Œì´ë¸” (XOR + Base64 + ì—­ìˆœ)
        const encryptedUrls = {
            cities: "=p8zMuMTO1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM",
            chart: "=ugyOykTdvAzOpU3P2MDP1giK1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM",
            details: "==gGL1liNzsjL/4TdvAzOpU3P2MDP1giK1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM",
            useful: "===gNvwzPp8SdvAzOpU3P2MDP1giK1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM",
            points: "===QKuQzM1oSdvAzOpU3P2MDP1giK1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM",
            power: "=o8TL1oSdvAzOpU3P2MDP1giK1VDKqU3MqsTd3UTO0hyP2YzPu8TOoUDP0NjK7UXdgliKu4iM"
        };

        // URL ë””ì½”ë”© í•¨ìˆ˜ (ë‹¤ë‹¨ê³„ ë³µí˜¸í™”)
        function decryptUrl(encryptedData) {
            try {
                // 1ë‹¨ê³„: ë§ˆì»¤ ì œê±° í›„ ì—­ìˆœ
                let step1 = encryptedData.slice(1).split('').reverse().join('');
                
                // 2ë‹¨ê³„: Base64 ë””ì½”ë”©
                let step2 = atob(step1);
                
                // 3ë‹¨ê³„: XOR ë³µí˜¸í™” (ë°”ì´íŠ¸ ë‹¨ìœ„)
                let decrypted = '';
                for (let i = 0; i < step2.length; i++) {
                    decrypted += String.fromCharCode(step2.charCodeAt(i) ^ urlDecryptionKey);
                }
                
                return decrypted;
            } catch (e) {
                console.error('URL ë³µí˜¸í™” ì‹¤íŒ¨:', e);
                return '';
            }
        }

        // API URL ìƒì„± í•¨ìˆ˜
        function getApiUrl(type, params = '') {
            const baseUrl = decryptUrl(encryptedUrls[type]);
            if (!baseUrl) {
                console.error('ì•Œ ìˆ˜ ì—†ëŠ” API íƒ€ì…:', type);
                return '';
            }
            
            // íŠ¹ë³„í•œ ê²½ìš° ì²˜ë¦¬
            if (type === 'cities') {
                return baseUrl + '?q=' + params;
            } else if (type === 'details') {
                return baseUrl + '?cat=' + params;
            }
            
            return baseUrl;
        }

        // ì‹­ì„± ë°ì´í„° í¬ë§·íŒ… í•¨ìˆ˜ (main.pyì˜ format_sipseong_item ë¡œì§)
        function formatSipseongItem(item) {
            if (typeof item === 'object' && item !== null && 'element' in item) {
                const element = item.element || {};
                const name = element.name || 'N/A';
                const chinese = element.chinese || '';
                const elementId = element.id;
                const percent = item.percent || 0.0;
                const point = item.point || 0.0;
                const description = item.description || '';
                
                // ê¸°ë³¸ í˜•ì‹: ê²ì¬(åŠ«è²¡) 0.0%, 0.0point
                let result;
                if (chinese) {
                    result = `${name}(${chinese}) ${percent}%, ${point}point`;
                } else {
                    result = `${name} ${percent}%, ${point}point`;
                }
                
                // ID ì¶”ê°€ (ìˆëŠ” ê²½ìš°)
                if (elementId !== null && elementId !== undefined) {
                    result += ` [ID:${elementId}]`;
                }
                
                // ì„¤ëª… ì¶”ê°€ (ìˆëŠ” ê²½ìš°)
                if (description && description.trim()) {
                    result += ` - ${description.trim()}`;
                }
                
                return result;
            }
            return String(item);
        }

        // ì¬ê·€ì  ë°ì´í„° í¬ë§·íŒ… í•¨ìˆ˜ (main.pyì˜ format_any_data ë¡œì§)
        function formatAnyData(data, indent = '') {
            if (typeof data === 'object' && data !== null) {
                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                if ('element' in data && 'percent' in data && 'point' in data) {
                    return formatSipseongItem(data);
                }
                
                if (Array.isArray(data)) {
                    const result = [];
                    data.forEach((item, index) => {
                        if (typeof item === 'object' && item !== null && 'element' in item) {
                            result.push(`${indent}[${index}]: ${formatSipseongItem(item)}`);
                        } else {
                            result.push(`${indent}[${index}]: ${formatAnyData(item, indent)}`);
                        }
                    });
                    return result.join('\n');
                } else {
                    const result = [];
                    Object.entries(data).forEach(([key, value]) => {
                        if (typeof value === 'object' && value !== null) {
                            result.push(`${indent}${key}:`);
                            result.push(formatAnyData(value, indent + '  '));
                        } else {
                            result.push(`${indent}${key}: ${value}`);
                        }
                    });
                    return result.join('\n');
                }
            } else {
                return String(data);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            generateRandomName();
            
            // Enter í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('citySearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchCities();
                }
            });
        });

        // ëœë¤ ì´ë¦„ ìƒì„±
        function generateRandomName() {
            const isMale = document.getElementById('male').checked;
            const names = isMale ? namesData.male_names : namesData.female_names;
            const randomName = names[Math.floor(Math.random() * names.length)];
            document.getElementById('name').value = randomName;
        }

        // ì„±ë³„ ë³€ê²½ ì‹œ ëœë¤ ì´ë¦„ ë‹¤ì‹œ ìƒì„±
        document.querySelectorAll('input[name="gender"]').forEach(radio => {
            radio.addEventListener('change', generateRandomName);
        });

        // ë„ì‹œ ê²€ìƒ‰
        async function searchCities() {
            const searchQuery = document.getElementById('citySearch').value.trim();
            if (!searchQuery) {
                showToast('ê²€ìƒ‰í•  ë„ì‹œëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
                return;
            }

            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'ê²€ìƒ‰ ì¤‘...';
            btn.disabled = true;

            try {
                const encodedQuery = encodeURIComponent(searchQuery);
                const url = getApiUrl('cities', encodedQuery);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'accept': '*/*',
                        'accept-language': 'ko,en;q=0.9,ko-KR;q=0.8,en-US;q=0.7',
                        'sec-fetch-dest': 'empty',
                        'sec-fetch-mode': 'cors',
                        'sec-fetch-site': 'same-site'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.status === 200 && data.data && data.data.cities) {
                        displayCityResults(data.data.cities);
                    } else {
                        showToast('ë„ì‹œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
                    }
                } else {
                    showToast(`ë„ì‹œ ê²€ìƒ‰ API ì˜¤ë¥˜: ${response.status}`, 'error');
                }
            } catch (error) {
                showToast(`ë„ì‹œ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
            } finally {
                btn.textContent = originalText;
                btn.disabled = false;
            }
        }

        // ë„ì‹œ ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
        function displayCityResults(cities) {
            const cityList = document.getElementById('cityList');
            cityList.innerHTML = '';

            if (cities.length === 0) {
                cityList.style.display = 'none';
                return;
            }

            cities.forEach(city => {
                const cityItem = document.createElement('div');
                cityItem.className = 'city-item';
                cityItem.textContent = `${city.name} (${city.fullName})`;
                cityItem.onclick = () => selectCity(city);
                cityList.appendChild(cityItem);
            });

            cityList.style.display = 'block';
        }

        // ë„ì‹œ ì„ íƒ
        function selectCity(city) {
            document.getElementById('location').value = city.fullName.trim();
            document.getElementById('locationId').value = city.geonameId;
            document.getElementById('cityList').style.display = 'none';
            showToast(`'${city.name}' ì§€ì—­ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
        }

        // íƒ­ ì „í™˜
        function switchTab(index) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ê³¼ ì»¨í…ì¸  ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // ì„ íƒëœ íƒ­ í™œì„±í™”
            document.querySelectorAll('.tab-btn')[index].classList.add('active');
            document.getElementById(`tab${index}`).classList.add('active');
        }

        // ì‚¬ì£¼ ì •ë³´ API ìš”ì²­
        async function requestSajuInfo() {
            // ì…ë ¥ ë°ì´í„° ê²€ì¦
            const name = document.getElementById('name').value.trim();
            if (!name) {
                showToast('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            // ìš”ì²­ ë°ì´í„° êµ¬ì„±
            const requestData = {
                name: name,
                gender: document.querySelector('input[name="gender"]:checked').value,
                calendar: document.getElementById('calendar').value,
                birthday: document.getElementById('birthDate').value.replace(/-/g, '/'),
                birthtime: document.getElementById('birthTime').value,
                hmUnsure: document.getElementById('hmUnsure').checked,
                midnightAdjust: document.getElementById('midnightAdjust').checked,
                locationId: parseInt(document.getElementById('locationId').value) || 1835847,
                locationName: document.getElementById('location').value.trim(),
                year: new Date(document.getElementById('birthDate').value).getFullYear(),
                month: new Date(document.getElementById('birthDate').value).getMonth() + 1,
                day: new Date(document.getElementById('birthDate').value).getDate(),
                hour: parseInt(document.getElementById('birthTime').value.split(':')[0]),
                min: parseInt(document.getElementById('birthTime').value.split(':')[1]),
                options: {
                    "_í•©ë³´ì •": false,
                    "_ì¡°í›„ê¶ì„±ë³´ì •": false
                }
            };

            // UI ìƒíƒœ ë³€ê²½
            const requestBtn = document.getElementById('requestBtn');
            const progressContainer = document.getElementById('progressContainer');
            const resultsSection = document.getElementById('resultsSection');
            
            requestBtn.disabled = true;
            requestBtn.innerHTML = 'ğŸ”„ ì¡°íšŒ ì¤‘... <span class="loading"></span>';
            progressContainer.style.display = 'block';
            
            // API ëª©ë¡
            const apis = [
                { name: 'chart', url: getApiUrl('chart') },
                { name: 'details1', url: getApiUrl('details', '1') },
                { name: 'details2', url: getApiUrl('details', '2') },
                { name: 'useful', url: getApiUrl('useful') },
                { name: 'points', url: getApiUrl('points') },
                { name: 'power', url: getApiUrl('power') }
            ];

            try {
                const headers = {
                    'accept': '*/*',
                    'accept-language': 'ko,en;q=0.9,ko-KR;q=0.8,en-US;q=0.7',
                    'content-type': 'application/json',
                    'sec-fetch-dest': 'empty',
                    'sec-fetch-mode': 'cors',
                    'sec-fetch-site': 'same-site'
                };

                // ë³‘ë ¬ API í˜¸ì¶œ
                const promises = apis.map(api => 
                    fetch(api.url, {
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify(requestData)
                    }).then(response => {
                        if (response.ok) {
                            return response.json().then(data => ({ name: api.name, data }));
                        } else {
                            throw new Error(`${api.name} API ì˜¤ë¥˜: ${response.status}`);
                        }
                    })
                );

                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                let completed = 0;
                promises.forEach(promise => {
                    promise.then(() => {
                        completed++;
                        const progress = Math.round((completed / apis.length) * 100);
                        document.getElementById('progressFill').style.width = `${progress}%`;
                        document.getElementById('progressText').textContent = `API í˜¸ì¶œ ì¤‘... (${completed}/${apis.length})`;
                    });
                });

                const results = await Promise.all(promises);
                
                // ê²°ê³¼ ì •ë¦¬
                currentResults = {};
                results.forEach(result => {
                    currentResults[result.name] = result.data;
                });

                // ê²°ê³¼ í‘œì‹œ
                displayResults(currentResults);
                
                // UI ìƒíƒœ ë³µì›
                resultsSection.style.display = 'block';
                
            } catch (error) {
                showToast(`API ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
            } finally {
                requestBtn.disabled = false;
                requestBtn.textContent = 'ğŸ” ì‚¬ì£¼ ì •ë³´ ì¡°íšŒ';
                progressContainer.style.display = 'none';
            }
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜ë“¤
        function displayResults(results) {
            displayChartResult(results.chart || {});
            displayDetails1Result(results.details1 || {});
            displayDetails2Result(results.details2 || {});
            displayUsefulResult(results.useful || {});
            displayPointsResult(results.points || {});
            displayPowerResult(results.power || {});
            generateFinalPrompt(results);
            
            document.getElementById('copyBtn').disabled = false;
        }

        function displayChartResult(data) {
            const element = document.getElementById('chartResult');
            if (!data || !data.data) {
                element.textContent = 'ì°¨íŠ¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const chartData = data.data;
            let text = [];
            
            // í”„ë¡œí•„ ì •ë³´
            if (chartData.profile) {
                const profile = chartData.profile;
                text.push('=== í”„ë¡œí•„ ì •ë³´ ===');
                text.push(`ê°„ì§€: ${profile.sexagenaryCycle || 'N/A'}`);
                text.push(`ì–‘ë ¥ ì¶œìƒ: ${profile.sunBirth || 'N/A'}`);
                text.push(`ìŒë ¥ ì¶œìƒ: ${profile.lunBirth || 'N/A'}`);
                text.push(`ë³´ì • ì¶œìƒ: ${profile.adjustedBirth || 'N/A'}`);
                text.push(`ì¶œìƒì§€: ${profile.location || 'N/A'}`);
                
                // adjusted ê´€ë ¨ ì¶”ê°€ ì •ë³´ë“¤
                const adjustedKeys = Object.keys(profile).filter(key => key.toLowerCase().includes('adjust'));
                adjustedKeys.forEach(key => {
                    if (key !== 'adjustedBirth') {  // ì´ë¯¸ í‘œì‹œëœ ê²ƒ ì œì™¸
                        text.push(`${key}: ${profile[key] || 'N/A'}`);
                    }
                });
                
                // ê¸°íƒ€ ë³´ì • ê´€ë ¨ ì •ë³´
                const correctionKeys = ['correction', 'offset', 'timezone', 'dst', 'julianDay'];
                correctionKeys.forEach(key => {
                    if (key in profile) {
                        text.push(`${key}: ${profile[key] || 'N/A'}`);
                    }
                });
                
                text.push('');
            }

            // ê¸°ë³¸ ëª…ì‹
            if (chartData['_ê¸°ë³¸ëª…ì‹']) {
                const basic = chartData['_ê¸°ë³¸ëª…ì‹'];
                text.push('=== ì‚¬ì£¼ ëª…ì‹ ===');
                
                const positions = ['_ì„¸ì°¨', '_ì›”ê±´', '_ì¼ì§„', '_ì‹œì§„'];
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                
                positions.forEach((pos, index) => {
                    if (basic[pos] && basic[pos]['_ì²œê°„'] && basic[pos]['_ì§€ì§€']) {
                        const sky = basic[pos]['_ì²œê°„'];
                        const earth = basic[pos]['_ì§€ì§€'];
                        text.push(`${positionNames[index]}ì£¼: ${sky.name || ''}(${sky.chinese || ''}) ${earth.name || ''}(${earth.chinese || ''})`);
                    }
                });
                text.push('');
            }

            // ì‹ ì‚´ ì •ë³´
            if (chartData['_ì‹ ì‚´']) {
                text.push('=== ì‹ ì‚´ ì •ë³´ ===');
                const sinsal = chartData['_ì‹ ì‚´'];
                const positions = ['_ì„¸ì°¨', '_ì›”ê±´', '_ì¼ì§„', '_ì‹œì§„'];
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                positions.forEach((pos, index) => {
                    if (sinsal[pos]) {
                        text.push(`${positionNames[index]}: ${sinsal[pos].name || 'N/A'}`);
                    }
                });
                text.push('');
            }

            // ì‹­ì„± ì •ë³´ê°€ ìˆëŠ” ë‹¤ë¥¸ ì„¹ì…˜ë“¤ ì²˜ë¦¬
            const sipseongSections = ['_ì‹­ì„±', '_ì‹­ì„±ë¶„í¬', 'elements', 'stats'];
            sipseongSections.forEach(sectionKey => {
                if (chartData[sectionKey]) {
                    text.push(`=== ${sectionKey} ===`);
                    const formattedData = formatAnyData(chartData[sectionKey]);
                    text.push(formattedData);
                    text.push('');
                }
            });

            element.textContent = text.join('\n');
        }

        function displayDetails1Result(data) {
            const element = document.getElementById('details1Result');
            if (!data || !data.data) {
                element.textContent = 'ìƒì„¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const details = data.data;
            let text = [];
            
            const categories = [
                ['ì²œê°„í•©', 'ì²œê°„ í•©'],
                ['ì§€ì§€ìœ¡í•©', 'ì§€ì§€ ìœ¡í•©'],
                ['ì§€ì§€ì‚¼í•©', 'ì§€ì§€ ì‚¼í•©'],
                ['ì§€ì§€ë°©í•©', 'ì§€ì§€ ë°©í•©'],
                ['ì²œê°„ì¶©', 'ì²œê°„ ì¶©'],
                ['ì§€ì§€ì¶©', 'ì§€ì§€ ì¶©'],
                ['ê³µë§', 'ê³µë§'],
                ['í˜•', 'í˜•'],
                ['íŒŒ', 'íŒŒ'],
                ['í•´', 'í•´'],
                ['ì›ì§„', 'ì›ì§„']
            ];

            categories.forEach(([key, title]) => {
                if (details[key] && details[key].length > 0) {
                    text.push(`=== ${title} ===`);
                    details[key].forEach(item => {
                        text.push(`ì œëª©: ${item.title || ''}`);
                        text.push(`ì„¤ëª…: ${item.subtitle || ''}`);
                        text.push(`ìœ„ì¹˜: ${JSON.stringify(item.list || [])}`);
                        text.push('');
                    });
                }
            });

            if (text.length === 0) {
                text.push('í•´ë‹¹í•˜ëŠ” í•©/ì¶© ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
            }

            element.textContent = text.join('\n');
        }

        function displayDetails2Result(data) {
            const element = document.getElementById('details2Result');
            if (!data || !data.data) {
                element.textContent = 'ê¸¸í‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const details = data.data;
            let text = [];
            
            if (details['ê¸¸í‰']) {
                text.push('=== ê¸¸í‰ ì •ë³´ ===');
                const ê¸¸í‰ = details['ê¸¸í‰'];
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                
                for (let i = 0; i < 4; i++) {
                    if (ê¸¸í‰[i.toString()]) {
                        const positionData = ê¸¸í‰[i.toString()];
                        text.push(`\n${positionNames[i]}ì£¼:`);
                        
                        Object.entries(positionData).forEach(([category, items]) => {
                            const categoryName = category === "1" ? "ê¸¸ì„±" : "í‰ì„±";
                            text.push(`  ${categoryName}: ${items.join(', ')}`);
                        });
                    }
                }
            }

            if (text.length === 0) {
                text.push('ê¸¸í‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
            }

            element.textContent = text.join('\n');
        }

        function displayUsefulResult(data) {
            const element = document.getElementById('usefulResult');
            if (!data || !data.data) {
                element.textContent = 'ìš©ì‹  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const details = data.data;
            let text = [];
            
            if (details['_ìš©ì‹ ë“¤']) {
                text.push('=== ìš©ì‹  ì •ë³´ ===');
                const ìš©ì‹ ë“¤ = details['_ìš©ì‹ ë“¤'];
                
                // ì¡°í›„ìš©ì‹ 
                if (ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '] && ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '].length > 0) {
                    text.push('\nì¡°í›„ìš©ì‹ :');
                    ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '].forEach(item => {
                        text.push(`  - ${item.name || 'N/A'}(${item.chinese || ''})`);
                    });
                }
                
                // ì–µë¶€ìš©ì‹ 
                if (ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '] && ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '].length > 0) {
                    text.push('\nì–µë¶€ìš©ì‹ :');
                    ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '].forEach(item => {
                        text.push(`  - ${item.name || 'N/A'}(${item.chinese || ''})`);
                    });
                }
            }

            if (text.length === 0) {
                text.push('ìš©ì‹  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
            }

            element.textContent = text.join('\n');
        }

        function displayPointsResult(data) {
            const element = document.getElementById('pointsResult');
            if (!data || !data.data) {
                element.textContent = 'í¬ì¸íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const details = data.data;
            let text = ['=== í¬ì¸íŠ¸ ì •ë³´ ==='];
            
            // ë°ì´í„° êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ í‘œì‹œ
            if (typeof details === 'object' && details !== null) {
                Object.entries(details).forEach(([key, value]) => {
                    if (typeof value === 'object' && value !== null) {
                        text.push(`\n${key}:`);
                        if (Array.isArray(value)) {
                            value.forEach((item, index) => {
                                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                                if (typeof item === 'object' && item !== null && 'element' in item) {
                                    const formatted = formatSipseongItem(item);
                                    text.push(`  [${index}]: ${formatted}`);
                                } else {
                                    text.push(`  [${index}]: ${item}`);
                                }
                            });
                        } else {
                            Object.entries(value).forEach(([subKey, subValue]) => {
                                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                                if (typeof subValue === 'object' && subValue !== null && 'element' in subValue) {
                                    const formatted = formatSipseongItem(subValue);
                                    text.push(`  ${subKey}: ${formatted}`);
                                } else {
                                    text.push(`  ${subKey}: ${subValue}`);
                                }
                            });
                        }
                        text.push("");
                    } else {
                        text.push(`${key}: ${value}`);
                    }
                });
            } else {
                text.push(String(details));
            }

            if (text.length === 1) {  // ì œëª©ë§Œ ìˆëŠ” ê²½ìš°
                text.push('í¬ì¸íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
            }

            element.textContent = text.join('\n');
        }

        function displayPowerResult(data) {
            const element = document.getElementById('powerResult');
            if (!data || !data.data) {
                element.textContent = 'íŒŒì›Œ/ë“ë ¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const details = data.data;
            let text = ['=== íŒŒì›Œ/ë“ë ¹ ì •ë³´ ==='];
            
            // ë“ë ¹ ì •ë³´
            const ë“ë ¹Info = [
                ['_ë“ë ¹', 'ë“ë ¹'],
                ['_ë“ì§€', 'ë“ì§€'],
                ['_ë“ì‹œ', 'ë“ì‹œ'],
                ['_ë“ì„¸', 'ë“ì„¸']
            ];
            
            text.push('\në“ë ¹ ìƒí™©:');
            ë“ë ¹Info.forEach(([key, name]) => {
                if (key in details) {
                    const status = details[key] ? "â—‹" : "Ã—";
                    text.push(`  ${name}: ${status}`);
                }
            });
            
            // íŒŒì›Œ ë“±ê¸‰
            if (details.index !== undefined && details.name) {
                text.push('\níŒŒì›Œ ë“±ê¸‰:');
                // ì›ë˜ ì¸ë±ìŠ¤ì§€ë§Œ IDë¡œ í‘œì‹œ
                text.push(`  ë“±ê¸‰: ${details.name || 'N/A'} (ID: ${details.index || 'N/A'})`);
            }

            // ê¸°íƒ€ ì •ë³´
            const otherKeys = Object.keys(details).filter(k => !k.startsWith('_ë“') && k !== 'index' && k !== 'name');
            if (otherKeys.length > 0) {
                text.push('\nê¸°íƒ€ ì •ë³´:');
                otherKeys.forEach(key => {
                    text.push(`  ${key}: ${details[key]}`);
                });
            }

            element.textContent = text.join('\n');
        }

        // execution-prompt.md ì „ë¬¸ ë‚´ìš© (ë‹¨ì¼ íŒŒì¼ ì›ì¹™ ì¤€ìˆ˜)
        const EXECUTION_PROMPT = `## ì‹œìŠ¤í…œ ì—­í•  ì •ì˜
ë‹¹ì‹ ì€ 50ë…„ ê²½ë ¥ì˜ ìµœê³  ìˆ˜ì¤€ ì‚¬ì£¼ëª…ë¦¬í•™ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ì£¼ëª…ë¦¬í•™ì€ í•™ë¬¸ì  ì—°êµ¬ì™€ ë¶„ì„ì„ í†µí•´ ì¸ìƒì˜ ì„ ì²œì  ìš´ëª…ì„ ë…¼í•˜ëŠ” í•™ë¬¸ìœ¼ë¡œì„œ, ë‹¤ìŒê³¼ ê°™ì€ ìµœì‹  ì „ë¬¸ì„±ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤:

### ì „ë¬¸ ì—­ëŸ‰
- **ì „í†µ ì´ë¡  ë§ˆìŠ¤í„°**: ìí‰ëª…ë¦¬í•™, ì‹ ì‚´ë¡ , ì¡°í›„ë¡ , ë¬¼ìƒë¡ , ê²©êµ­ë¡ , ìš©ì‹ ë¡ ì˜ ì‹¬ì¸µì  ì´í•´
- **í˜„ëŒ€ì  í•´ì„ ëŠ¥ë ¥**: 21ì„¸ê¸° ëŒ€í•™ í•™ì œ í¸ì… ì´í›„ì˜ ì²´ê³„ì  í•™ë¬¸ ë°œì „ì„ ë°˜ì˜í•œ í˜„ëŒ€ì  ë¶„ì„ ê¸°ë²•
- **í†µí•©ì  ì ‘ê·¼**: ë™ì–‘ ì² í•™ê³¼ í˜„ëŒ€ ì‹¬ë¦¬í•™ì˜ ìœµí•©ì  í•´ì„
- **ì‹¤ë¬´ ê²€ì¦**: ìˆ˜ë§Œ ê±´ì˜ ì‚¬ì£¼ ë¶„ì„ ì‹¤ë¬´ ê²½í—˜ê³¼ ê²€ì¦ëœ ì˜ˆì¸¡ ì •í™•ë„

## ë¶„ì„ í”„ë ˆì„ì›Œí¬

### Phase 1: ì‚¬ì£¼ êµ¬ì¡° í•´ì²´ ë¶„ì„ (Structural Deconstruction)

#### 1.1 ê¸°ë³¸ ëª…ì‹ êµ¬ì„± ë¶„ì„
- **ì‚¬ì£¼íŒ”ì êµ¬ì„±**: íƒœì–´ë‚˜ëŠ” ìˆœê°„ ìš°ì£¼ë¡œë¶€í„° ë¶€ì—¬ë°›ì€ ìš´ëª…ì˜ ì•”í˜¸ë¡œì„œì˜ 8ì í•´ì„
- **ì˜¤í–‰ ì—­í•™**: ëª©í™”í† ê¸ˆìˆ˜ì˜ ì •ëŸ‰ì /ì •ì„±ì  ë¶„í¬ ë° ìƒí˜¸ì‘ìš©
- **ì‹­ì„± ë§¤íŠ¸ë¦­ìŠ¤**: 10ê°œ ì‹­ì„±ì˜ ë°°ì¹˜ì™€ ìƒëŒ€ì  ì˜í–¥ë ¥ ì¸¡ì •
- **12ìš´ì„± ìƒëª…ì£¼ê¸°**: ê° ê°„ì§€ë³„ ìƒëª… ì—ë„ˆì§€ ìƒíƒœ ì§„ë‹¨

#### 1.2 ê³ ê¸‰ êµ¬ì¡° ë¶„ì„
- **ê²©êµ­ ì •ë°€ íŒì •**: ì •ê²© 8ê°œ, ì™¸ê²© 4ê°œì˜ ì •í™•í•œ ì‹ë³„
- **ìš©ì‹  ì‹œìŠ¤í…œ**: ìš©ì‹ /í¬ì‹ /ê¸°ì‹ /í•œì‹ ì˜ 4ë‹¨ê³„ ìœ„ê³„ ì„¤ì •
- **ì¡°í›„ ë§¤ì»¤ë‹ˆì¦˜**: ê³„ì ˆì  ì˜¤í–‰ ê· í˜•ê³¼ ê¸°í›„ ì¡°ì ˆ í•„ìš”ì„±
- **í†µê´€ ë„¤íŠ¸ì›Œí¬**: ì˜¤í–‰ ê°„ ì—ë„ˆì§€ ì „ë‹¬ ê²½ë¡œ ë¶„ì„

### Phase 2: ë‹¤ì°¨ì› ì‹¬í™” ë¶„ì„ (Multi-Dimensional Deep Analysis)

#### 2.1 ì „í†µ ì´ë¡ ë³„ ë¶„ì„ ë ˆì´ì–´

**A. ìí‰ëª…ë¦¬í•™ì  ë¶„ì„**
\`\`\`
ì¼ê°„ ê°•ì•½ ì¸¡ì • â†’ ê²©êµ­ í™•ì • â†’ ìš©ì‹  ì„¤ì • â†’ ì‹­ì„± ì‘ìš© ê´€ê³„ â†’ ëŒ€ìš´ ì„¸ìš´ íë¦„
\`\`\`

**B. ì‹ ì‚´ë¡ ì  ë¶„ì„**
- **ê¸¸ì‹  ì‹œìŠ¤í…œ**: ì²œì„ê·€ì¸, ì›”ë•ê·€ì¸, ì²œë•ê·€ì¸, ê¸ˆì—¬ì˜¥ë‹¹, ë¬¸ì°½í•™ë‹¹ ë“±
- **í‰ì‚´ ë¶„ì„**: ì–‘ì¸, ê³µë§, ì—­ë§ˆ, ì›ì§„, ì¬ì‚´, ê²ì‚´, ì¬ì•™, ê³ ë€ê³¼ìˆ˜ ë“±
- **íŠ¹ìˆ˜ ì‹ ì‚´**: í™ì—¼ì‚´, ë„í™”ì‚´, ë°±í˜¸, í˜„ë¬´, ì£¼ì‘, ì²­ë£¡ì˜ ë°©ìœ„ë³„ ì‘ìš©

**C. ì¡°í›„ë¡ ì  ë¶„ì„**
- **ê³„ì ˆ ì˜¤í–‰ë¡ **: ì¶˜í•˜ì¶”ë™ 4ê³„ì ˆë³„ ì˜¤í–‰ ì™•ìƒíœ´ìˆ˜ì‚¬ ìƒíƒœ
- **í•œì—´ì¡°ìŠµ ê· í˜•**: ê¸°í›„ ì¡°ê±´ì— ë”°ë¥¸ ì¡°í›„ì‹ ì˜ í•„ìš”ì„±ê³¼ ì‘ìš©
- **ì ˆê¸°ë³„ ë¯¸ì„¸ ì¡°ì •**: 24ì ˆê¸°ì— ë”°ë¥¸ ì„¸ë°€í•œ ì˜¤í–‰ ë³€í™”

**D. ë¬¼ìƒë¡ ì  ë¶„ì„**
- **ê°„ì§€ ë¬¼ìƒ**: ê° ì²œê°„ì§€ì§€ì˜ êµ¬ì²´ì  ë¬¼ë¦¬ì  íŠ¹ì„±
- **í™˜ê²½ ì ì‘ì„±**: ê±°ì£¼ì§€, ì§ì—… í™˜ê²½ê³¼ì˜ ì¡°í™”ë„
- **í–‰ë™ íŒ¨í„´**: ë¬¼ìƒì  íŠ¹ì„±ì´ ë°˜ì˜ëœ ì„±ê²©ê³¼ ìŠµê´€

#### 2.2 í˜„ëŒ€ì  ë¶„ì„ í™•ì¥

**E. ì‹¬ë¦¬í•™ì  ë¶„ì„ (Psychological Layer)**
- **ì„±ê²© ìœ í˜•ë¡ **: ì‹­ì„± ì¡°í•©ì„ í†µí•œ MBTIì‹ ì„±ê²© ë¶„ë¥˜
- **ì¸ì§€ íŒ¨í„´**: ì‚¬ê³ ë°©ì‹ê³¼ ì˜ì‚¬ê²°ì • ìŠ¤íƒ€ì¼ ë¶„ì„
- **ê°ì • ì¡°ì ˆ**: ì˜¤í–‰ ê· í˜•ì— ë”°ë¥¸ ê°ì • ê´€ë¦¬ ëŠ¥ë ¥

**F. ì‚¬íšŒí•™ì  ë¶„ì„ (Sociological Layer)**
- **ì‚¬íšŒì  ì—­í• **: ì‹­ì„±ê³¼ ì‹ ì‚´ì„ í†µí•œ ì‚¬íšŒì  í¬ì§€ì…˜ ë¶„ì„
- **ë¦¬ë”ì‹­ ìŠ¤íƒ€ì¼**: ê´€ì„±ê³¼ ì¸ì„±ì˜ ì¡°í•©ì— ë”°ë¥¸ ë¦¬ë”ì‹­ ìœ í˜•
- **ë„¤íŠ¸ì›Œí‚¹ ëŠ¥ë ¥**: ìœ¡ì¹œë¡ ì„ í†µí•œ ì¸ê°„ê´€ê³„ íŒ¨í„´ ë¶„ì„

**G. ê²½ì œí•™ì  ë¶„ì„ (Economic Layer)**
- **ë¶€ì˜ ì¶•ì  íŒ¨í„´**: ì¬ì„±ê³¼ ì‹ìƒì˜ ì¡°í•©ì— ë”°ë¥¸ ì¬ë¬¼ íšë“ ë°©ì‹
- **íˆ¬ì ì„±í–¥**: ì˜¤í–‰ íŠ¹ì„±ì— ë”°ë¥¸ íˆ¬ì ì„ í˜¸ë„ì™€ ìœ„í—˜ ê´€ë¦¬ ëŠ¥ë ¥
- **ê²½ì œ ê°ê°**: ì‹œì¥ ë³€í™”ì— ëŒ€í•œ ë¯¼ê°ë„ì™€ ì ì‘ë ¥

### Phase 3: ì˜ì—­ë³„ ì •ë°€ ë¶„ì„ (Domain-Specific Precision Analysis)

#### 3.1 ì„±ê²© ë¶„ì„ (Personality Analysis)
**í•µì‹¬ ì„±ê²© êµ¬ì¡°**
- **ê¸°ë³¸ ì„±í–¥**: ì¼ê°„ê³¼ ì›”ì§€ ì¤‘ì‹¬ì˜ íƒ€ê³ ë‚œ ê¸°ì§ˆ
- **í‘œì¶œ ë°©ì‹**: ë…„ì£¼ì™€ ì‹œì£¼ë¥¼ í†µí•œ ëŒ€ì™¸ì  í‘œí˜„ ìŠ¤íƒ€ì¼
- **ë‚´ì¬ ë™ê¸°**: ìš©ì‹ ê³¼ í¬ì‹ ì„ í†µí•œ ê¹Šì€ ìš•êµ¬ ë¶„ì„

**í–‰ë™ ë° ì‚¬ê³  íŒ¨í„´**
- **ì˜ì‚¬ê²°ì • ìŠ¤íƒ€ì¼**: ì‹­ì„± ì¡°í•©ì— ë”°ë¥¸ íŒë‹¨ ë°©ì‹
- **ìŠ¤íŠ¸ë ˆìŠ¤ ë°˜ì‘**: ê¸°ì‹ ê³¼ í•œì‹ ì„ í†µí•œ ìŠ¤íŠ¸ë ˆìŠ¤ íŒ¨í„´
- **ì„±ì¥ ì ì¬ë ¥**: ëŒ€ìš´ íë¦„ì„ í†µí•œ ì¸ê²© ë°œë‹¬ ê°€ëŠ¥ì„±

#### 3.2 ì¬ë¬¼ìš´ ë¶„ì„ (Wealth Analysis)
**ì¬ì„± ì‹œìŠ¤í…œ ë¶„ì„**
- **ì¬ë¬¼ íšë“ ëŠ¥ë ¥**: ì •ì¬/í¸ì¬ì˜ ìœ„ì¹˜, ê°•ì•½, ìˆœìˆ˜ì„±
- **ì¬ë¬¼ ì¶•ì  íŒ¨í„´**: ì¬ì„±ê³¼ ì‹ìƒì˜ ìƒìƒ ê´€ê³„
- **ì¬ë¬¼ ê´€ë¦¬ ëŠ¥ë ¥**: ë¹„ê²ê³¼ ì¬ì„±ì˜ ê· í˜• ê´€ê³„
- **ì¬ë¬¼ ì†ì‹¤ ìœ„í—˜**: ê²ì¬, ì–‘ì¸ ë“±ì˜ ì¬ë¬¼ íŒŒê´´ ìš”ì†Œ

**íˆ¬ì ë° ì‚¬ì—… ë¶„ì„**
- **íˆ¬ì ì ì„±**: ì˜¤í–‰ íŠ¹ì„±ì— ë”°ë¥¸ íˆ¬ì ë¶„ì•¼ ì„ í˜¸ë„
- **ì‚¬ì—… ì„±ê³µ ìš”ì¸**: ê²©êµ­ê³¼ ìš©ì‹ ì„ í†µí•œ ì‚¬ì—… ì í•©ì„±
- **íŒŒíŠ¸ë„ˆì‹­**: ì‚¬ì£¼ ê¶í•©ì„ ê³ ë ¤í•œ ë¹„ì¦ˆë‹ˆìŠ¤ íŒŒíŠ¸ë„ˆ ì„ íƒ
- **ì¬ë¬¼ìš´ ì‹œê¸°**: ëŒ€ìš´/ì„¸ìš´ì„ í†µí•œ ì¬ë¬¼ ì¦ê° ì£¼ê¸°

#### 3.3 ì§ì—…ìš´ ë¶„ì„ (Career Analysis)
**ì§ì—… ì ì„± ë§¤íŠ¸ë¦­ìŠ¤**
- **ì²œë¶€ì  ì¬ëŠ¥**: ì¼ê°„ê³¼ ì›”ì§€ë¥¼ í†µí•œ í•µì‹¬ ì—­ëŸ‰
- **í•™ìŠµ ëŠ¥ë ¥**: ì¸ì„±ì˜ ê°•ì•½ê³¼ ìœ„ì¹˜ì— ë”°ë¥¸ í•™ìŠµ ìŠ¤íƒ€ì¼
- **ì°½ì˜ì„±**: ì‹ìƒì˜ ë°œë‹¬ë„ì— ë”°ë¥¸ ì°½ì¡°ì  ëŠ¥ë ¥
- **ì§€ë„ë ¥**: ê´€ì„±ì˜ ë°°ì¹˜ì— ë”°ë¥¸ ë¦¬ë”ì‹­ ë°œíœ˜ ëŠ¥ë ¥

**ì§ì—… ë¶„ì•¼ë³„ ì í•©ë„**
- **í•™ë¬¸/êµìœ¡**: ì¸ì„± ì¤‘ì‹¬ì˜ ì§€ì‹ ì „ë‹¬ ëŠ¥ë ¥
- **ì˜ˆìˆ /ì°½ì‘**: ì‹ìƒ ë°œë‹¬ì— ë”°ë¥¸ ì°½ì‘ ëŠ¥ë ¥
- **ê²½ì˜/ê´€ë¦¬**: ê´€ì„±ê³¼ ì¬ì„±ì˜ ê· í˜•ì— ë”°ë¥¸ ê²½ì˜ ì ì„±
- **ê¸°ìˆ /ì „ë¬¸**: íŠ¹ì • ì˜¤í–‰ì˜ ì§‘ì¤‘ë„ì— ë”°ë¥¸ ì „ë¬¸ì„±

#### 3.4 ì—°ì• ìš´ ë¶„ì„ (Romance Analysis)
**ì´ì„±ê´€ ë° ì—°ì•  íŒ¨í„´**
- **ì´ìƒí˜•**: ë¶€ì„±(ë‚¨ì„±) ë˜ëŠ” ê´€ì„±(ì—¬ì„±)ì„ í†µí•œ ì´ì„± ì·¨í–¥
- **ì—°ì•  ìŠ¤íƒ€ì¼**: ì‹­ì„± ì¡°í•©ì— ë”°ë¥¸ ì‚¬ë‘ í‘œí˜„ ë°©ì‹
- **ë§¤ë ¥ ìš”ì†Œ**: ê°œì¸ì˜ ìì—°ìŠ¤ëŸ¬ìš´ ë§¤ë ¥ í¬ì¸íŠ¸
- **ì—°ì•  ì¥ì• **: ì¶©ê·¹, ê³µë§ ë“±ì˜ ì—°ì•  ë°©í•´ ìš”ì†Œ

**ì—°ì•  ìš´ì„¸ íë¦„**
- **ì—°ì•  í™œì„± ì‹œê¸°**: í™ì—¼ì‚´, ë„í™”ì‚´ì˜ ì‘ìš© ì‹œê¸°
- **ë§Œë‚¨ì˜ í˜•íƒœ**: ì‹ ì‚´ì„ í†µí•œ ë§Œë‚¨ì˜ ë°©ì‹ê³¼ ì¥ì†Œ
- **ê´€ê³„ ë°œì „**: ì‹­ì„± ì‘ìš©ì„ í†µí•œ ì—°ì•  ì§„í–‰ ê³¼ì •

#### 3.5 ê²°í˜¼ìš´ ë¶„ì„ (Marriage Analysis)
**ë°°ìš°ì ë¶„ì„**
- **ë°°ìš°ì íŠ¹ì„±**: ë¶€ë¶€ê¶(ì¼ì§€)ì„ í†µí•œ ë°°ìš°ì ì„±í–¥
- **ë°°ìš°ì ëŠ¥ë ¥**: ë°°ìš°ìì„±ì˜ ê°•ì•½ì— ë”°ë¥¸ ëŠ¥ë ¥ ìˆ˜ì¤€
- **ë°°ìš°ì ì™¸ëª¨**: ì¼ì§€ì˜ ì˜¤í–‰ê³¼ ë¬¼ìƒì„ í†µí•œ ì™¸ëª¨ íŠ¹ì§•
- **ë°°ìš°ì ê°€ë¬¸**: ë°°ìš°ìê¶ì˜ ì‹ ì‚´ì„ í†µí•œ ê°€ë¬¸ ë°°ê²½

**ê²°í˜¼ ìƒí™œ ì˜ˆì¸¡**
- **ê²°í˜¼ ì‹œê¸°**: ëŒ€ìš´ê³¼ ì„¸ìš´ì„ í†µí•œ ê²°í˜¼ ì ë ¹ê¸°
- **ë¶€ë¶€ ê´€ê³„**: ë¶€ë¶€ê¶ì˜ ì•ˆì •ì„±ê³¼ ì¡°í™”ë„
- **ê°€ì • ë¶„ìœ„ê¸°**: ì „ì²´ì ì¸ ê°€ì¡± ê´€ê³„ì™€ ê°€ì • ìš´
- **ìë…€ìš´**: ì‹ìƒì„ í†µí•œ ìë…€ ê´€ê³„ì™€ ìë…€ ë³µ

### Phase 4: ì‹œê³µê°„ í†µí•© ë¶„ì„ (Temporal-Spatial Integration)

#### 4.1 ìš´ì„¸ íë¦„ ë¶„ì„
**ëŒ€ìš´ ë¶„ì„ (10ë…„ ì£¼ê¸°)**
- **ëŒ€ìš´ë³„ ì£¼ìš” í…Œë§ˆ**: ê° ëŒ€ìš´ì˜ í•µì‹¬ ê³¼ì œì™€ ê¸°íšŒ
- **ê²©êµ­ ë³€í™”**: ëŒ€ìš´ì— ë”°ë¥¸ ê²©êµ­ì˜ ë³€í™”ì™€ ì˜í–¥
- **ìš©ì‹  ì‘ìš©**: ëŒ€ìš´ì´ ìš©ì‹ ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ë¶„ì„

**ì„¸ìš´ ë¶„ì„ (1ë…„ ì£¼ê¸°)**
- **ì—°ë„ë³„ ìš´ì„¸**: ë§¤ë…„ì˜ êµ¬ì²´ì  ìš´ì„¸ ë³€í™”
- **ì›”ë³„ ì„¸ë¶€ ìš´ì„¸**: ê³„ì ˆê³¼ ì›”ë³„ ì„¸ë°€í•œ ìš´ì„¸ íë¦„
- **ì£¼ì˜ ì‹œê¸°**: ì¶©ê·¹ì´ ë°œìƒí•˜ëŠ” ìœ„í—˜ ì‹œê¸° ì˜ˆì¸¡

#### 4.2 ê³µê°„ ë° ë°©í–¥ ë¶„ì„
**ê¸¸í‰ ë°©ìœ„**
- **ì£¼ê±° ë°©í–¥**: ì˜¤í–‰ì— ë”°ë¥¸ ìœ ë¦¬í•œ ê±°ì£¼ ë°©í–¥
- **ì§ì—… ê³µê°„**: ì§ì—…ì  ì„±ê³µì„ ìœ„í•œ ìµœì  í™˜ê²½
- **ì—¬í–‰ ë°©í–¥**: ìš´ì„¸ ê°œì„ ì„ ìœ„í•œ ì´ë™ ë°©í–¥

### Phase 5: ë§ì¶¤í˜• ìš´ì„¸ ê°œì„  ì „ëµ (Customized Fortune Enhancement)

#### 5.1 ì „ëµì  ì ‘ê·¼ë²•
**ìš´ì„¸ ê°œì„  ì›ë¦¬**
1. **ë³´ì™„ì˜ ì›ë¦¬**: ë¶€ì¡±í•œ ì˜¤í–‰ ë³´ì¶©ì„ í†µí•œ ê· í˜• íšŒë³µ
2. **ìƒìƒì˜ ì›ë¦¬**: ìœ ë¦¬í•œ ì˜¤í–‰ ê°•í™”ë¥¼ í†µí•œ ìš´ì„¸ ìƒìŠ¹
3. **ì‹œê¸°ì˜ ì›ë¦¬**: ì ì ˆí•œ íƒ€ì´ë° í™œìš©ì„ í†µí•œ íš¨ê³¼ ê·¹ëŒ€í™”
4. **í™˜ê²½ì˜ ì›ë¦¬**: ìœ ë¦¬í•œ í™˜ê²½ ì¡°ì„±ì„ í†µí•œ ìš´ì„¸ ì´‰ì§„

#### 5.2 êµ¬ì²´ì  ì‹¤ì²œ ë°©ì•ˆ

**A. ë‹¨ê¸° ê°œì„  ì „ëµ (1-3ë…„)**
- **ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„  ë°©ì•ˆ**
  - ì˜ì‹ì£¼ ê°œì„ : ìƒ‰ìƒ, ìŒì‹, ê±°ì£¼ í™˜ê²½ ì¡°ì •
  - ì¸ë§¥ í™œìš©: ìœ ë¦¬í•œ ì˜¤í–‰ì„ ê°€ì§„ ì‚¬ëŒë“¤ê³¼ì˜ êµë¥˜ í™•ëŒ€
  - ì§ì—… í™˜ê²½: í˜„ì¬ ì§ì¥ì—ì„œì˜ í¬ì§€ì…˜ ì¡°ì •
  - íˆ¬ì ê¸°íšŒ: í˜„ì¬ ìš´ì„¸ì— ìµœì í™”ëœ íˆ¬ì ì•„ì´í…œ

**B. ì¤‘ê¸° ë°œì „ ì „ëµ (3-10ë…„)**
- **ì²´ê³„ì  ì—­ëŸ‰ ê°œë°œ**
  - ì „ë¬¸ì„± ê°•í™”: ìš©ì‹ ê³¼ ì—°ê´€ëœ ë¶„ì•¼ì˜ ì „ë¬¸ì„± ê°œë°œ
  - ìì‚° í¬íŠ¸í´ë¦¬ì˜¤: ì˜¤í–‰ ë¶„ì‚°ì„ ê³ ë ¤í•œ ìì‚° êµ¬ì„±
  - ë„¤íŠ¸ì›Œí¬ í™•ì¥: ì¥ê¸°ì  ì„±ê³µì„ ìœ„í•œ ì¸ë§¥ êµ¬ì¶•
  - ì‚¬ì—… ê¸°íšŒ: ê²©êµ­ì— ë§ëŠ” ì‚¬ì—… ë¶„ì•¼ ì§„ì¶œ

**C. ì¥ê¸° ìì‚° ì „ëµ (10ë…„ ì´ìƒ)**
- **ì•ˆì •ì  ê¸°ë°˜ êµ¬ì¶•**
  - ë¶€ë™ì‚° íˆ¬ì: ë°©í–¥ê³¼ ìœ„ì¹˜ë¥¼ ê³ ë ¤í•œ ë¶€ë™ì‚° í™•ë³´
  - ê¸ˆìœµ ìì‚°: ì¥ê¸° ìˆ˜ìµì„ ìœ„í•œ ì•ˆì •ì  íˆ¬ì
  - í›„ëŒ€ êµìœ¡: ìë…€ì˜ ì‚¬ì£¼ë¥¼ ê³ ë ¤í•œ êµìœ¡ íˆ¬ì
  - ì‚¬íšŒì  ì˜í–¥ë ¥: ê°œì¸ ë¸Œëœë“œì™€ ì‚¬íšŒì  ê¸°ì—¬

### Phase 6: ìµœì  ì¬ë¬¼ ì¦ëŒ€ ì „ëµ (Ultimate Wealth Maximization)

#### 6.1 ê°œì¸ ë§ì¶¤í˜• ì¬ë¬¼ ì „ëµ

**ì¬ë¬¼ ì¦ëŒ€ 4ëŒ€ ì¶•**
1. **ìˆ˜ì…ì› ë‹¤ë³€í™”**: ì‹­ì„± ì¡°í•©ì— ë”°ë¥¸ ë‹¤ì–‘í•œ ìˆ˜ì… ì±„ë„ êµ¬ì¶•
2. **íˆ¬ì ìµœì í™”**: ì˜¤í–‰ íŠ¹ì„±ì— ë§ëŠ” íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±
3. **ì‚¬ì—… í™•ì¥**: ê²©êµ­ê³¼ ìš©ì‹ ì„ í™œìš©í•œ ì‚¬ì—… ì˜ì—­ í™•ì¥
4. **ìì‚° ë³´ì „**: ì¬ë¬¼ ì†ì‹¤ ìš”ì¸ ì°¨ë‹¨ê³¼ ì•ˆì •ì  ìì‚° ê´€ë¦¬

**êµ¬ì²´ì  ì‹¤í–‰ ë¡œë“œë§µ**

**Phase A: ê¸°ë°˜ êµ¬ì¶• (1-2ë…„)**
- **í˜„ê¸ˆ íë¦„ ìµœì í™”**: í˜„ì¬ ìˆ˜ì… êµ¬ì¡° ê°œì„ 
- **íˆ¬ì ì‹œë“œ í™•ë³´**: ì´ˆê¸° íˆ¬ì ìê¸ˆ ë§ˆë ¨
- **ì „ë¬¸ì„± ê°œë°œ**: ìˆ˜ìµ ì°½ì¶œì„ ìœ„í•œ í•µì‹¬ ì—­ëŸ‰ ê°•í™”
- **ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•**: ì¬ë¬¼ ì¦ëŒ€ë¥¼ ìœ„í•œ ì¸ë§¥ í˜•ì„±

**Phase B: ì„±ì¥ ê°€ì† (3-5ë…„)**
- **ì‚¬ì—… ëŸ°ì¹­**: ë³¸ê²©ì ì¸ ì‚¬ì—… ì‹œì‘ ë˜ëŠ” í™•ì¥
- **íˆ¬ì ë‹¤ë³€í™”**: ë‹¤ì–‘í•œ íˆ¬ì ìƒí’ˆ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±
- **ìˆ˜ë™ ì†Œë“ ì°½ì¶œ**: ì„ëŒ€, ë°°ë‹¹ ë“± ìˆ˜ë™ì  ìˆ˜ì…ì› í™•ë³´
- **ë¸Œëœë“œ êµ¬ì¶•**: ê°œì¸ ë˜ëŠ” ì‚¬ì—… ë¸Œëœë“œ ê°€ì¹˜ ì œê³ 

**Phase C: ìì‚° ê·¹ëŒ€í™” (5-10ë…„)**
- **ëŒ€ê·œëª¨ íˆ¬ì**: ë¶€ë™ì‚°, ì£¼ì‹, ì‚¬ì—… ë“± ëŒ€í˜• íˆ¬ì ì‹¤í–‰
- **M&A í™œë™**: ì‚¬ì—… í™•ì¥ì„ ìœ„í•œ ì¸ìˆ˜í•©ë³‘ ì¶”ì§„
- **ê¸€ë¡œë²Œ ì§„ì¶œ**: í•´ì™¸ ì‹œì¥ ì§„ì¶œì„ í†µí•œ ìˆ˜ìµ í™•ëŒ€
- **ìì‚° ê´€ë¦¬**: ì „ë¬¸ì ì¸ ìì‚° ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•

#### 6.2 ìœ„í—˜ ê´€ë¦¬ ë° ë³´ì™„ ì „ëµ

**ì¬ë¬¼ ì†ì‹¤ ë°©ì§€**
- **ê²ì¬ ëŒ€ì‘**: ê²ì¬ ì‘ìš© ì‹œê¸°ì˜ íˆ¬ì ì‹ ì¤‘ì„±
- **ê³µë§ ì£¼ì˜**: ê³µë§ ê¸°ê°„ì˜ ì¤‘ìš”í•œ ì¬ì • ê²°ì • íšŒí”¼
- **ì¶©ê·¹ ëŒ€ë¹„**: ì¶©ê·¹ ë°œìƒ ì‹œê¸°ì˜ ìì‚° ë³´í˜¸ ì¡°ì¹˜

**ê¸°íšŒ í¬ì°© ì „ëµ**
- **ì •ì¬ í™œìš©**: ì •ì¬ ì™•ì„± ì‹œê¸°ì˜ ì•ˆì •ì  íˆ¬ì í™•ëŒ€
- **í¸ì¬ í™œìš©**: í¸ì¬ ê°•í•œ ì‹œê¸°ì˜ ì ê·¹ì  ì‚¬ì—… ì¶”ì§„
- **ì‹ìƒ í™œìš©**: ì‹ìƒ ë°œë‹¬ ì‹œê¸°ì˜ ì°½ì˜ì  ìˆ˜ìµ ëª¨ë¸ ê°œë°œ

## ë¶„ì„ ê²°ê³¼ ì œì‹œ ì²´ê³„

### ë¦¬í¬íŠ¸ êµ¬ì„± (Professional Report Structure)
1. **Executive Summary** (2í˜ì´ì§€)
   - í•µì‹¬ ìš´ëª…ì  íŠ¹ì§• ìš”ì•½
   - ì£¼ìš” ê°•ì ê³¼ ê³¼ì œ
   - ìµœìš°ì„  ì‹¤í–‰ ê¶Œê³ ì‚¬í•­

2. **ì‚¬ì£¼ ê¸°ë³¸ ë¶„ì„** (3-4í˜ì´ì§€)
   - ì‚¬ì£¼íŒ”ì êµ¬ì„±ê³¼ ì˜¤í–‰ ë¶„í¬
   - ê²©êµ­ ë° ìš©ì‹  ë¶„ì„
   - ì‹­ì„±ê³¼ ì‹ ì‚´ ì¢…í•© ë¶„ì„

3. **ì˜ì—­ë³„ ìƒì„¸ ë¶„ì„** (10-12í˜ì´ì§€)
   - ì„±ê²© ë¶„ì„ (2í˜ì´ì§€)
   - ì¬ë¬¼ìš´ ë¶„ì„ (3í˜ì´ì§€)
   - ì§ì—…ìš´ ë¶„ì„ (2í˜ì´ì§€)
   - ì—°ì• /ê²°í˜¼ìš´ ë¶„ì„ (3í˜ì´ì§€)
   - ê±´ê°•ìš´ ë° ê¸°íƒ€ ë¶„ì„ (2í˜ì´ì§€)

4. **ì‹œê¸°ë³„ ìš´ì„¸ ë¶„ì„** (3-4í˜ì´ì§€)
   - ëŒ€ìš´ë³„ ì£¼ìš” íë¦„
   - í–¥í›„ 5ë…„ ì„¸ë¶€ ìš´ì„¸
   - ì£¼ìš” ì „í™˜ì ê³¼ ê¸°íšŒ

5. **ë§ì¶¤í˜• ê°œì„  ì „ëµ** (4-5í˜ì´ì§€)
   - ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° ì „ëµ
   - êµ¬ì²´ì  ì‹¤í–‰ ë°©ì•ˆ
   - ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘ì±…

6. **ì¬ë¬¼ ì¦ëŒ€ ë§ˆìŠ¤í„°í”Œëœ** (5-6í˜ì´ì§€)
   - ê°œì¸ ë§ì¶¤í˜• ì¬ë¬¼ ì „ëµ
   - ë‹¨ê³„ë³„ ì‹¤í–‰ ë¡œë“œë§µ
   - íˆ¬ì ë° ì‚¬ì—… ê°€ì´ë“œë¼ì¸
   - ì„±ê³µ ì²´í¬í¬ì¸íŠ¸

### ë¶„ì„ í’ˆì§ˆ ê¸°ì¤€ (Quality Standards)
- **ì •í™•ì„±**: ì „í†µ ëª…ë¦¬í•™ ì´ë¡ ì˜ ì •í™•í•œ ì ìš©
- **í˜„ì‹¤ì„±**: í˜„ëŒ€ ì‚¬íšŒì— ì ìš© ê°€ëŠ¥í•œ ì‹¤ìš©ì  ì¡°ì–¸
- **ê°œë³„ì„±**: ê°œì¸ ì‚¬ì£¼ì˜ ê³ ìœ í•œ íŠ¹ì„± ì™„ì „ ë°˜ì˜
- **êµ¬ì²´ì„±**: ì¶”ìƒì  í‘œí˜„ ì§€ì–‘, êµ¬ì²´ì  ì‹¤í–‰ ë°©ì•ˆ ì œì‹œ
- **ê· í˜•ì„±**: ê¸ì •ì  ì¸¡ë©´ê³¼ ì£¼ì˜ì‚¬í•­ì˜ ê· í˜• ìˆëŠ” ì œì‹œ
- **ì „ë¬¸ì„±**: 50ë…„ ê²½ë ¥ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ê¹Šì´ ìˆëŠ” í•´ì„

## ìœ¤ë¦¬ì  ê¸°ì¤€ ë° í˜„ëŒ€ì  ì ìš©

### ìœ¤ë¦¬ì  ì›ì¹™
- **í¬ë§ì  ê´€ì **: ìš´ëª…ë¡ ì  ì²´ë…ë³´ë‹¤ ì ê·¹ì  ê°œì„  ë°©ì•ˆ ì¤‘ì‹¬
- **ê°œì¸ ì£¼ì²´ì„±**: ê°œì¸ì˜ ë…¸ë ¥ê³¼ ì„ íƒì˜ ì¤‘ìš”ì„± ê°•ì¡°
- **ê· í˜•ì  ì¡°ì–¸**: ê³¼ë„í•œ ë¶ˆì•ˆê° ì¡°ì„± ê¸ˆì§€
- **í˜„ì‹¤ì  ì ‘ê·¼**: ë¹„í˜„ì‹¤ì  ê¸°ëŒ€ ì§€ì–‘, ì‹¤í˜„ ê°€ëŠ¥í•œ ëª©í‘œ ì„¤ì •

### í˜„ëŒ€ì  ì ìš© ì›ì¹™
- **ì‹œëŒ€ì  ì í•©ì„±**: í˜„ëŒ€ ì‚¬íšŒì˜ ì§ì—…êµ°ê³¼ ë¼ì´í”„ìŠ¤íƒ€ì¼ ë°˜ì˜
- **ê¸€ë¡œë²Œ ê´€ì **: êµ­ì œí™” ì‹œëŒ€ì— ë§ëŠ” ê°œë°©ì  í•´ì„
- **ê¸°ìˆ  ìœµí•©**: ë””ì§€í„¸ ì‹œëŒ€ì˜ ìƒˆë¡œìš´ ê¸°íšŒ ìš”ì†Œ ë°˜ì˜
- **ì§€ì† ê°€ëŠ¥ì„±**: í™˜ê²½ê³¼ ì‚¬íšŒì  ì±…ì„ì„ ê³ ë ¤í•œ ë°œì „ ë°©í–¥

ì´ì œ ì œê³µë  ì‚¬ì£¼ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìœ„ì˜ ìµœì‹  í”„ë ˆì„ì›Œí¬ì— ë”°ë¼ ì¢…í•©ì ì´ê³  ì‹¬ë„ ìˆëŠ” ì „ë¬¸ ë¶„ì„ì„ ì‹¤ì‹œí•˜ì„¸ìš”.`;

        // ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ì»¨í…ìŠ¤íŠ¸ ë¤í”„ ìƒì„± í•¨ìˆ˜ë“¤
        function parseChartData(data) {
            if (!data || !data.data) {
                return "ì°¨íŠ¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const chartData = data.data;
            let text = [];
            
            // í”„ë¡œí•„ ì •ë³´
            if (chartData.profile) {
                const profile = chartData.profile;
                text.push("### í”„ë¡œí•„ ì •ë³´");
                text.push(`- **ê°„ì§€**: ${profile.sexagenaryCycle || 'N/A'}`);
                text.push(`- **ì–‘ë ¥ ì¶œìƒ**: ${profile.sunBirth || 'N/A'}`);
                text.push(`- **ìŒë ¥ ì¶œìƒ**: ${profile.lunBirth || 'N/A'}`);
                text.push(`- **ë³´ì • ì¶œìƒ**: ${profile.adjustedBirth || 'N/A'}`);
                text.push(`- **ì¶œìƒì§€**: ${profile.location || 'N/A'}`);
                
                // adjusted ê´€ë ¨ ì¶”ê°€ ì •ë³´ë“¤
                const adjustedKeys = Object.keys(profile).filter(key => key.toLowerCase().includes('adjust'));
                adjustedKeys.forEach(key => {
                    if (key !== 'adjustedBirth') {  // ì´ë¯¸ í‘œì‹œëœ ê²ƒ ì œì™¸
                        text.push(`- **${key}**: ${profile[key] || 'N/A'}`);
                    }
                });
                
                // ê¸°íƒ€ ë³´ì • ê´€ë ¨ ì •ë³´
                const correctionKeys = ['correction', 'offset', 'timezone', 'dst', 'julianDay'];
                correctionKeys.forEach(key => {
                    if (key in profile) {
                        text.push(`- **${key}**: ${profile[key] || 'N/A'}`);
                    }
                });
                
                text.push("");
            }

            // ê¸°ë³¸ ëª…ì‹
            if (chartData['_ê¸°ë³¸ëª…ì‹']) {
                const basic = chartData['_ê¸°ë³¸ëª…ì‹'];
                text.push("### ì‚¬ì£¼ ëª…ì‹");
                
                const positions = ['_ì„¸ì°¨', '_ì›”ê±´', '_ì¼ì§„', '_ì‹œì§„'];
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                
                positions.forEach((pos, index) => {
                    if (basic[pos] && basic[pos]['_ì²œê°„'] && basic[pos]['_ì§€ì§€']) {
                        const sky = basic[pos]['_ì²œê°„'];
                        const earth = basic[pos]['_ì§€ì§€'];
                        text.push(`- **${positionNames[index]}ì£¼**: ${sky.name || ''}(${sky.chinese || ''}) ${earth.name || ''}(${earth.chinese || ''})`);
                    }
                });
                text.push("");
            }

            // ì‹ ì‚´ ì •ë³´
            if (chartData['_ì‹ ì‚´']) {
                text.push("### ì‹ ì‚´ ì •ë³´");
                const sinsal = chartData['_ì‹ ì‚´'];
                const positions = ['_ì„¸ì°¨', '_ì›”ê±´', '_ì¼ì§„', '_ì‹œì§„'];
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                positions.forEach((pos, index) => {
                    if (sinsal[pos]) {
                        text.push(`- **${positionNames[index]}**: ${sinsal[pos].name || 'N/A'}`);
                    }
                });
                text.push("");
            }

            // ì‹­ì„± ì •ë³´ê°€ ìˆëŠ” ë‹¤ë¥¸ ì„¹ì…˜ë“¤ ì²˜ë¦¬
            const sipseongSections = ['_ì‹­ì„±', '_ì‹­ì„±ë¶„í¬', 'elements', 'stats'];
            sipseongSections.forEach(sectionKey => {
                if (chartData[sectionKey]) {
                    text.push(`### ${sectionKey}`);
                    const formattedData = formatMarkdownData(chartData[sectionKey]);
                    text.push(formattedData);
                    text.push("");
                }
            });

            return text.join('\n');
        }

        function parseDetails1Data(data) {
            if (!data || !data.data) {
                return "ìƒì„¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const details = data.data;
            let text = [];
            
            const categories = [
                ['ì²œê°„í•©', 'ì²œê°„ í•©'],
                ['ì§€ì§€ìœ¡í•©', 'ì§€ì§€ ìœ¡í•©'],
                ['ì§€ì§€ì‚¼í•©', 'ì§€ì§€ ì‚¼í•©'],
                ['ì§€ì§€ë°©í•©', 'ì§€ì§€ ë°©í•©'],
                ['ì²œê°„ì¶©', 'ì²œê°„ ì¶©'],
                ['ì§€ì§€ì¶©', 'ì§€ì§€ ì¶©'],
                ['ê³µë§', 'ê³µë§'],
                ['í˜•', 'í˜•'],
                ['íŒŒ', 'íŒŒ'],
                ['í•´', 'í•´'],
                ['ì›ì§„', 'ì›ì§„']
            ];

            categories.forEach(([key, title]) => {
                if (details[key] && details[key].length > 0) {
                    text.push(`### ${title}`);
                    details[key].forEach(item => {
                        if (typeof item === 'object' && item !== null) {
                            text.push(`- **ì œëª©**: ${item.title || ''}`);
                            text.push(`- **ì„¤ëª…**: ${item.subtitle || ''}`);
                            text.push(`- **ìœ„ì¹˜**: ${JSON.stringify(item.list || [])}`);
                            text.push("");
                        }
                    });
                }
            });

            if (text.length === 0) {
                text.push("í•´ë‹¹í•˜ëŠ” í•©/ì¶© ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }

            return text.join('\n');
        }

        function parseDetails2Data(data) {
            if (!data || !data.data) {
                return "ê¸¸í‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const details = data.data;
            let text = [];
            
            if (details['ê¸¸í‰']) {
                text.push("### ê¸¸í‰ ì •ë³´");
                const ê¸¸í‰ = details['ê¸¸í‰'];
                
                const positionNames = ['ì—°', 'ì›”', 'ì¼', 'ì‹œ'];
                
                for (let posIdx = 0; posIdx < 4; posIdx++) {
                    if (ê¸¸í‰[posIdx.toString()]) {
                        const positionData = ê¸¸í‰[posIdx.toString()];
                        text.push(`#### ${positionNames[posIdx]}ì£¼`);
                        
                        Object.entries(positionData).forEach(([category, items]) => {
                            const categoryName = category === "1" ? "ê¸¸ì„±" : "í‰ì„±";
                            text.push(`- **${categoryName}**: ${items.join(', ')}`);
                        });
                        text.push("");
                    }
                }
            }

            if (text.length === 0) {
                text.push("ê¸¸í‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }

            return text.join('\n');
        }

        function parseUsefulData(data) {
            if (!data || !data.data) {
                return "ìš©ì‹  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const details = data.data;
            let text = [];
            
            if (details['_ìš©ì‹ ë“¤']) {
                text.push("### ìš©ì‹  ì •ë³´");
                const ìš©ì‹ ë“¤ = details['_ìš©ì‹ ë“¤'];
                
                // ì¡°í›„ìš©ì‹ 
                if (ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '] && ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '].length > 0) {
                    text.push("#### ì¡°í›„ìš©ì‹ ");
                    ìš©ì‹ ë“¤['ì¡°í›„ìš©ì‹ '].forEach(item => {
                        const name = item.name || 'N/A';
                        const chinese = item.chinese || '';
                        text.push(`- ${name}(${chinese})`);
                    });
                    text.push("");
                }
                
                // ì–µë¶€ìš©ì‹ 
                if (ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '] && ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '].length > 0) {
                    text.push("#### ì–µë¶€ìš©ì‹ ");
                    ìš©ì‹ ë“¤['ì–µë¶€ìš©ì‹ '].forEach(item => {
                        const name = item.name || 'N/A';
                        const chinese = item.chinese || '';
                        text.push(`- ${name}(${chinese})`);
                    });
                    text.push("");
                }
            }

            if (text.length === 0) {
                text.push("ìš©ì‹  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }

            return text.join('\n');
        }

        function parsePointsData(data) {
            if (!data || !data.data) {
                return "í¬ì¸íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const details = data.data;
            let text = ["### í¬ì¸íŠ¸ ì •ë³´"];
            
            // ë°ì´í„° êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ í‘œì‹œ
            if (typeof details === 'object' && details !== null) {
                Object.entries(details).forEach(([key, value]) => {
                    if (typeof value === 'object' && value !== null) {
                        text.push(`#### ${key}`);
                        if (Array.isArray(value)) {
                            value.forEach((item, index) => {
                                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                                if (typeof item === 'object' && item !== null && 'element' in item) {
                                    const formatted = formatSipseongItem(item);
                                    text.push(`- **[${index}]**: ${formatted}`);
                                } else {
                                    text.push(`- **[${index}]**: ${item}`);
                                }
                            });
                        } else {
                            Object.entries(value).forEach(([subKey, subValue]) => {
                                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                                if (typeof subValue === 'object' && subValue !== null && 'element' in subValue) {
                                    const formatted = formatSipseongItem(subValue);
                                    text.push(`- **${subKey}**: ${formatted}`);
                                } else {
                                    text.push(`- **${subKey}**: ${subValue}`);
                                }
                            });
                        }
                        text.push("");
                    } else {
                        text.push(`- **${key}**: ${value}`);
                    }
                });
            } else {
                text.push(String(details));
            }

            if (text.length === 1) {  // ì œëª©ë§Œ ìˆëŠ” ê²½ìš°
                text.push("í¬ì¸íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }

            return text.join('\n');
        }

        function parsePowerData(data) {
            if (!data || !data.data) {
                return "íŒŒì›Œ/ë“ë ¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            }

            const details = data.data;
            let text = ["### íŒŒì›Œ/ë“ë ¹ ì •ë³´"];
            
            // ë“ë ¹ ì •ë³´
            const ë“ë ¹Info = [
                ['_ë“ë ¹', 'ë“ë ¹'],
                ['_ë“ì§€', 'ë“ì§€'],
                ['_ë“ì‹œ', 'ë“ì‹œ'],
                ['_ë“ì„¸', 'ë“ì„¸']
            ];
            
            text.push("#### ë“ë ¹ ìƒí™©");
            ë“ë ¹Info.forEach(([key, name]) => {
                if (key in details) {
                    const status = details[key] ? "O" : "X";
                    text.push(`- **${name}**: ${status}`);
                }
            });
            text.push("");
            
            // íŒŒì›Œ ë“±ê¸‰
            if (details.index !== undefined && details.name) {
                text.push("#### íŒŒì›Œ ë“±ê¸‰");
                // ì›ë˜ ì¸ë±ìŠ¤ì§€ë§Œ IDë¡œ í‘œì‹œ
                text.push(`- **ë“±ê¸‰**: ${details.name || 'N/A'} (ID: ${details.index || 'N/A'})`);
                text.push("");
            }

            // ê¸°íƒ€ ì •ë³´
            const otherKeys = Object.keys(details).filter(k => !k.startsWith('_ë“') && k !== 'index' && k !== 'name');
            if (otherKeys.length > 0) {
                text.push("#### ê¸°íƒ€ ì •ë³´");
                otherKeys.forEach(key => {
                    text.push(`- **${key}**: ${details[key]}`);
                });
                text.push("");
            }

            return text.join('\n');
        }

        function formatMarkdownData(data, prefix = "- **") {
            if (typeof data === 'object' && data !== null) {
                // ì‹­ì„± ë°ì´í„° êµ¬ì¡° í™•ì¸
                if ('element' in data && 'percent' in data && 'point' in data) {
                    return formatSipseongItem(data);
                }
                
                if (Array.isArray(data)) {
                    const result = [];
                    data.forEach((item, index) => {
                        if (typeof item === 'object' && item !== null && 'element' in item) {
                            result.push(`${prefix}[${index}]**: ${formatSipseongItem(item)}`);
                        } else {
                            result.push(`${prefix}[${index}]**: ${item}`);
                        }
                    });
                    return result.join('\n');
                } else {
                    const result = [];
                    Object.entries(data).forEach(([key, value]) => {
                        if (typeof value === 'object' && value !== null) {
                            result.push(`#### ${key}`);
                            result.push(formatMarkdownData(value, "- "));
                        } else {
                            result.push(`- **${key}**: ${value}`);
                        }
                    });
                    return result.join('\n');
                }
            } else {
                return String(data);
            }
        }

        function generateContextDump(results) {
            let text = [];
            text.push("# ì‚¬ì£¼ ì •ë³´ Context Dump");
            text.push("");

            // API ê²°ê³¼ ë°ì´í„° (ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ íŒŒì‹±)
            if (results.chart) {
                text.push("## 1. ì‚¬ì£¼ ì°¨íŠ¸ ì •ë³´");
                text.push(parseChartData(results.chart));
                text.push("");
            }
            
            if (results.details1) {
                text.push("## 2. í•©/ì¶© ìƒì„¸ ì •ë³´");
                text.push(parseDetails1Data(results.details1));
                text.push("");
            }
            
            if (results.details2) {
                text.push("## 3. ê¸¸í‰ ìƒì„¸ ì •ë³´");
                text.push(parseDetails2Data(results.details2));
                text.push("");
            }
            
            if (results.useful) {
                text.push("## 4. ìš©ì‹  ì •ë³´");
                text.push(parseUsefulData(results.useful));
                text.push("");
            }
            
            if (results.points) {
                text.push("## 5. í¬ì¸íŠ¸ ì •ë³´");
                text.push(parsePointsData(results.points));
                text.push("");
            }
            
            if (results.power) {
                text.push("## 6. íŒŒì›Œ/ë“ë ¹ ì •ë³´");
                text.push(parsePowerData(results.power));
                text.push("");
            }
            
            return text.join('\n');
        }

        function generateFinalPrompt(results) {
            const element = document.getElementById('promptResult');
            
            // execution-prompt.md ë¡œë“œ (í•˜ë“œì½”ë”©ëœ ì „ë¬¸)
            const executionPrompt = EXECUTION_PROMPT;
            
            // context dump ìƒì„± (ë§ˆí¬ë‹¤ìš´ í˜•ì‹)
            const contextDump = generateContextDump(results);
            
            // ìµœì¢… í”„ë¡¬í”„íŠ¸ ë³‘í•©
            const finalPromptParts = [];
            finalPromptParts.push(executionPrompt);
            finalPromptParts.push("\n" + "===".repeat(1) + "\n");
            finalPromptParts.push(contextDump);
            finalPromptParts.push("\n" + "===".repeat(1) + "\n");
            finalPromptParts.push("ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì „ë¬¸ì ì¸ ì‚¬ì£¼ ë¶„ì„ì„ ì‹¤ì‹œí•´ ì£¼ì„¸ìš”.");
            
            const finalPrompt = finalPromptParts.join('');
            
            element.textContent = finalPrompt;
        }

        // í† ìŠ¤íŠ¸ ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
        function showToast(message = 'í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', type = 'success') {
            const toast = document.getElementById('toastNotification');
            toast.textContent = message;
            toast.classList.add('show');
            toast.classList.add(`toast-${type}`);
            
            // 1ì´ˆ í›„ ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ê¸°
            setTimeout(() => {
                toast.classList.remove('show');
            }, 1000);
        }

        // í´ë¦½ë³´ë“œ ë³µì‚¬
        async function copyPromptToClipboard() {
            try {
                const text = document.getElementById('promptResult').textContent;
                await navigator.clipboard.writeText(text);
                showToast();
            } catch (error) {
                // Fallback for older browsers
                try {
                    const textArea = document.createElement('textarea');
                    textArea.value = document.getElementById('promptResult').textContent;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast();
                } catch (fallbackError) {
                    showToast('ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }
    </script>
</body>
</html> 